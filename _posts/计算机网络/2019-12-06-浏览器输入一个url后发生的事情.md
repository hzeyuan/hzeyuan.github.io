---
layout: post
title: "览器输入一个url后发生的事情"
subtitle: '览器输入一个url后发生的事情'
author: "Hzy"
header-style: text
tags:
  - 计算机网络
---


## 计算机网络中经常会问到，当浏览器输入一个url会发生什么事情，今天把其中涉及的知识点总结归纳一下。

### 1.首先浏览器输入了url连接,那url是啥

>url是统一资源定位符号，指定我们需要的资源在什么位置

#### 1.1 url由哪些部分组成

> url由[协议名]/[主机ip和端口]/[存放资源的主机路径]/[资源名称]

### 2. 但我们平时用的不是ip+端口，而是域名，而这就需要了解DNS域名系统了。

#### 2.1 什么是DNS域名系统，以及它的作用。

> DNS域名系统是一个分布式数据库，它的作用就是帮助我们把`ip地址`映射成`域名`，方便我们人类的记忆和使用。

#### 2.2 DNS域名系统是如何工作的， 是如何把`域名`映射成ip地址的？

>域名系统可以看成一颗很大的树。

* 根域名服务器一共有13台，记录了所有的顶级域名服务器的ip和地址，只要有一台根域名服务器可以正常工作，整个域名系统就不会挂掉。
* 根域名下会有很多顶级域名。
* 顶级域名下面，又会有很多二级域名，就这样一层层..有很多的域名。

> 当然我们本地也有一个域名服务器，缓存我们用过的ip,能帮助我们更快的找到对应的ip.

* 域名解析过程
* 服务器请求本地的域名服务器，DNS Cache中看看这个域名有没有缓存，在看看本地的host文件，`有`的话就返回查询结果。
* `没有的话`,则继续`请求根域名服务器`，根域名服务器会返回一个域名服务器地址(我们要查的域名就在里面！)。
* 然后我们本地服务器在向这个域名服务器发送请求，服务器呢，在查询自己的缓存，或者继续寻向下级寻找,直到找到结果，然后返回ip。
* 找到ip后，本地域名服务器在将结果进行缓存，下次使用就能派上用场啦，并且返回给浏览器。

> 域名解析的过程就是上面这个样子，最终我们就能找到ip啦，但现在我们在来谈谈一些DNS安全问题。

> 1.域名劫持(DNS劫持)

* 简单说就是在域名解析的过程中，被人作了手脚，返回的ip不在是原来的ip了，而是攻击者修改后的ip
* 结果可能就导致你访问的域名，回来的是一个钓鱼网站
* 或者回来的是一个假的ip,让你上不了网。



#### 3.现在找到服务器的ip地址啦，但知道ip还不够，我们还需知道这个ip的MAC地址。

> 问题1:都有了ip地址了，为啥还有MAC地址？搞事情啊

> 问题2:我们是如何把ip地址对应的MAC地址的？



### 参考文章

* https://mp.weixin.qq.com/s/uIBi2kGF9WCgj_Qc5DEhHA
* https://zhuanlan.zhihu.com/p/28771785